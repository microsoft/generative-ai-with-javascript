# درس ۲: نوشتن اولین برنامه هوش مصنوعی شما

در این فصل یاد خواهید گرفت:

- محیط توسعه خود را تنظیم کنید.
- یک برنامه پایه بنویسید.
- پیام‌های سیستمی (System Prompts) را درک کنید.

## راه‌اندازی

اگر قبلاً این کار را نکرده‌اید، محیط توسعه خود را تنظیم کنید. در اینجا نحوه انجام آن آمده است: [محیط خود را تنظیم کنید](/docs/setup/README.md).

## منابع مرتبط

[![تماشای ویدیوی کوتاه درباره مدل‌های زبان بزرگ](https://img.youtube.com/vi/GQ_2OjNZ9aA/0.jpg)](https://www.youtube.com/watch?v=GQ_2OjNZ9aA&list=PLlrxD0HtieHi5ZpsHULPLxm839IrhmeDk&index=2)

_این ویدیو مقدمه‌ای بر مدل‌های هوش مصنوعی به نام «مدل‌های زبان بزرگ» (LLMs)، چیستی آن‌ها و نحوه استفاده از آن‌ها برای ادغام هوش مصنوعی در برنامه‌هایتان ارائه می‌دهد._

*🎥 برای تماشای ویدیوی کوتاه درباره مدل‌های زبان بزرگ، روی تصویر بالا کلیک کنید*

💼 اسلایدها: [مقدمه‌ای بر مدل‌های زبان بزرگ، LLMs](../../videos/slides/01-llms.pptx)

## روایت: خود را در قایقی بر روی رودخانه تصور کنید


> [!NOTE] 
> _داستان ما تا اینجا: شما یک سازنده اشیاء هستید، یک صنعتگر از لندن دهه ۱۸۶۰ که با استفاده از دستگاهی مرموز به نام «سوسک زمان» (Time Beetle) در زمان سفر کرده‌اید. شما در طول تاریخ سفر کرده‌اید و شاهد ساخت فانوس دریایی اسکندریه بوده‌اید، شگفتی مهندسی باستان که با کمک کمی از دینوکراتس و سوسک زمان به ساخت آن کمک کردید._
>
> اگر می‌خواهید داستان را از ابتدا دنبال کنید و با هوش مصنوعی مولد شروع کنید، [درس ۱](../01-intro-to-genai/README.md) را ببینید.

> [!NOTE] 
> در حالی که توصیه می‌کنیم داستان را دنبال کنید (سرگرم‌کننده است!)، [اینجا کلیک کنید](#interact-with-leonardo) اگر ترجیح می‌دهید مستقیماً به محتوای فنی بروید.

همراه با دینوکراتس، آخرین کارهای فانوس دریایی اسکندریه را انجام می‌دهید. سازه بلند در نور خورشید می‌درخشد و سنگ صیقلی آن دریای مدیترانه را منعکس می‌کند.

به سوسک زمان در دستتان نگاه می‌کنید، سطح فلزی آن در برابر کف دستتان خنک است. مشت خود را دور آن گره می‌کنید و زمزمه می‌کنید: «مرا به خانه ببر.» سوسک شروع به درخشش می‌کند، نوری ملایم و گرم از خود ساطع می‌کند و دنیای اطرافتان در گردبادی از رنگ‌ها حل می‌شود.

### یک ماجراجویی جدید

وقتی چشمانتان را باز می‌کنید، دنیا تغییر کرده است. همانطور که موفق می‌شوید بلند شوید، متوجه می‌شوید که در قایقی روی رودخانه هستید. به اطراف نگاه می‌کنید، در دوردست، ساختمان‌هایی را می‌بینید که خطوط کلی آن‌ها توسط مه صبحگاهی محو شده است.

با نگاه کردن به اطراف قایق، یک پاروی بلند را می‌بینید که به کنار قایق تکیه داده شده است. آن را می‌گیرید و شروع به پارو زدن به سمت ساختمان‌های دوردست می‌کنید. هرچه نزدیک‌تر می‌شوید، ساختمان‌ها واضح‌تر می‌شوند، آن‌ها قدیمی هستند و معماری‌شان یادآور نقاشی‌های رنسانس است.

<div>
  <img src="./assets/boat.png" alt="قایقی روی رودخانه، مردی ایستاده با پارو" width="300" >
</div>

سوال اکنون این است که این بار کجا و چه زمانی هستید؟

موفق می‌شوید قایق را در اسکله مهار کنید و شروع به راه رفتن در امتداد تخته‌های چوبی می‌کنید، صدای قدم‌هایتان به آرامی طنین‌انداز می‌شود.

همانطور که راه می‌روید، مردی با ریش بلند و کلاه را می‌بینید که در حال جستجو در جعبه‌ای است که به نظر می‌رسد قطعات مکانیکی است. دستانش ماهرانه حرکت می‌کنند و چرخ‌دنده‌ها و فنرها را با سهولت تمرین شده مرتب می‌کنند.

<div >
  <img src="./assets/leonardo.png" alt="لئوناردو داوینچی کنار جعبه‌ای در بندر ایستاده است" width="300" >
</div>

### به من کمک کن، لئوناردو

**شما:** «ببخشید آقا، من کجا هستم؟» او به شما نگاه می‌کند، سردرگمی در چشمانش آشکار است. متوجه می‌شوید که به انگلیسی صحبت کرده‌اید، سریع از دستگاه در دستتان استفاده می‌کنید و از آن می‌خواهید ترجمه کند.

**سوسک زمان:** «البته، به ایتالیایی قرن پانزدهم ترجمه می‌کنم. 'Dove sono?'»

**پیرمرد:** پیرمرد پاسخ می‌دهد: «Siete a Firenze, signore. E chi siete voi?»

**سوسک زمان:** سوسک زمان ترجمه می‌کند: «او می‌گوید شما در فلورانس هستید و می‌پرسد شما کی هستید.»

**شما:** «به او بگو من سازنده اشیاء هستم و دنبال جایی برای کار می‌گردم.»

**پیرمرد:** Un artigiano, eh? Avete mai sentito parlare di Leonardo da Vinci?

**سوسک زمان:** سوسک زمان ترجمه می‌کند: «او می‌پرسد آیا نام لئوناردو داوینچی را شنیده‌اید.»

**شما:** «البته،» می‌گویید. «به او بگو شنیده‌ام و می‌خواهم او را ملاقات کنم.»

**پیرمرد:** پیرمرد لبخند می‌زند: «Allora, seguitemi, vi porterò da lui.»

**شما:** می‌پرسید: «او چه گفت؟»

**سوسک زمان:** سوسک زمان پاسخ می‌دهد: «او گفت شما را پیش لئوناردو می‌برد.»

### در کارگاه

<div>
  <img src="./assets/leonardo-workshop.png" alt="کارگاه لئوناردو" width="300" >
</div>

پیرمرد شما را به سمت در چوبی بزرگی هدایت می‌کند و با منظره کارگاهی پر از انواع وسایل مکانیکی روبرو می‌شوید.

از سوسک زمان می‌خواهید که در مورد محل لئوناردو سوال کند.

**شما:** «Dove è Leonardo?»

**پیرمرد:** پیرمرد با لبخند به سمت شما برمی‌گردد: «Sono io (من هستم)، لئوناردو داوینچی. Chi siete voi؟»، شما کی هستید؟

احساس هیجان می‌کنید.

**شما:** حدس می‌زدم. من یک سازنده همکار هستم، خارج از مکان و زمان.»

**لئوناردو:** چشمان لئوناردو از کنجکاوی برق می‌زند. «Interessante, cosa vi porta qui?»

سوسک زمان ترجمه می‌کند.

**سوسک زمان:** «او می‌پرسد چه چیزی شما را به اینجا آورده است.»

**شما:** «خب، من روی پروژه‌ای کار می‌کردم و به اینجا رسیدم.»

سوسک زمان را به او نشان می‌دهید و چشمانش از شگفتی روشن می‌شود. او آن را با دقت بررسی می‌کند در حالی که شما توضیح می‌دهید چگونه کار می‌کند و چگونه به فلورانس رسیده‌اید.

لئوناردو با هیجان به شما نگاه می‌کند.

**لئوناردو:** شما سازنده اشیاء هستید. من پروژه‌ای دارم که ممکن است برایتان جالب باشد. من روی ماشینی کار می‌کنم که می‌تواند بر اساس ورودی کلامی متن تولید کند. آیا می‌خواهید در این کار به من کمک کنید؟

لئوناردو داوینچی از شما می‌خواهد در پروژه‌ای به او کمک کنید—به سختی می‌توانید باور کنید. با اشتیاق سر تکان می‌دهید و می‌گویید:

**شما:** باعث افتخار من است که در پروژه شما کمک کنم،
«Sarebbe un onore aiutarti con il tuo progetto.»

## تعامل با لئوناردو

اگر می‌خواهید با لئوناردو تعامل داشته باشید، برنامه [شخصیت‌ها](/app/README.md) را اجرا کنید.

> [!IMPORTANT]
> این کاملاً تخیلی است؛ پاسخ‌ها توسط هوش مصنوعی تولید می‌شوند.
> [سلب مسئولیت هوش مصنوعی مسئولانه](../../README.md#responsible-ai-disclaimer)

<div>
  <img src="./assets/leonardo-talk.jpeg" width=300>
</div>

**مراحل**:

1.  یک [![GitHub Codespace](https://img.shields.io/badge/GitHub-Codespace-brightgreen)](https://codespaces.new/microsoft/generative-ai-with-javascript) را شروع کنید.
2.  به _/app/README.md_ در ریشه مخزن بروید.
3.  کنسول را پیدا کرده و `npm install` و سپس `npm start` را اجرا کنید.
4.  پس از ظاهر شدن، دکمه "Open in Browser" را انتخاب کنید.
5.  با لئوناردو چت کنید.

برای توضیح دقیق‌تر برنامه، به [توضیح دقیق برنامه](/lessons/01-intro-to-genai/README.md#interact-with-dinocrates) مراجعه کنید.

> [!NOTE]
 > اگر پروژه را به صورت محلی روی دستگاه خود اجرا می‌کنید، لطفاً راهنمای شروع سریع را برای دریافت [توکن دسترسی شخصی GitHub](../../docs/setup/README.md#creating-a-personal-access-token-pat-for-github-model-access) و جایگزینی کلید در کد، مرور کنید.

## راه‌اندازی محیط توسعه

قبل از اینکه بتوانید به لئوناردو در پروژه‌اش کمک کنید، ابتدا باید در مورد «ابزارهای ضروری کار» که برای شروع کمک مؤثر به او لازم است، فکر کنید.

**شما:** «سوسک زمان، برای شروع این پروژه به چه چیزهایی نیاز دارم؟ ابزارها و کتابخانه‌هایی را پیشنهاد کن که برای ساختن یک برنامه هوش مصنوعی که تو بتوانی اجرا کنی، به من کمک کنند.»

**سوسک زمان:** من با اکثر ماشین‌هایی که در قرن بیست و یکم کار می‌کنند سازگار هستم، لیست زیر را برای مجموعه‌ای از ابزارها و کتابخانه‌های ضروری ببینید.

- **ویرایشگر متن**، به عنوان مثال Visual Studio Code.
- **ترمینال**، برای اجرای دستورات.
- **مرورگر برای آزمایش برنامه شما**. همچنین خوب است ابزاری مانند curl یا کلاینت HTTP دیگری برای آزمایش نقاط پایانی API برنامه خود داشته باشید.

- **Node.js**. شما همچنین باید Node.js و npm را نصب کنید که ابزارهایی هستند که به شما کمک می‌کنند کد جاوا اسکریپت را روی رایانه خود اجرا کنید.

- **کلید API**. برای دسترسی به مدل هوش مصنوعی مولد به یک کلید API نیاز دارید. می‌توانید این را از ارائه‌دهنده مدل، به عنوان مثال OpenAI یا Azure OpenAI دریافت کنید.

**شما:** متشکرم، سوسک زمان، حدس می‌زنم تو به نوعی آن‌ها را از آن «وب» که درباره‌اش صحبت کردی، تهیه خواهی کرد؟

**سوسک زمان:** بله، من قبلاً آن‌ها را دارم و یک صفحه کلید و صفحه نمایش را روی دیوار روبروی شما نمایش می‌دهم.

## نوشتن یک برنامه پایه

**شما:** درباره نوشتن واقعی برنامه بیشتر به من بگو، چگونه شروع کنم؟

**سوسک زمان:** البته، برای نوشتن یک برنامه، در ساده‌ترین حالت، ارسال یک درخواست به یک API و نمایش پاسخ است. بیایید آن را تجزیه کنیم:

- **ورودی**: در یک برنامه تولید متن پایه، ورودی به متن اولیه‌ای اشاره دارد که می‌خواهید برنامه آن را گسترش دهد یا بر اساس آن بسازد. این ورودی می‌تواند توسط کاربر در زمان اجرا ارائه شود یا از قبل در خود برنامه تنظیم (کدگذاری سخت) شده باشد. در حال حاضر، با استفاده از متن کدگذاری شده سخت به عنوان ورودی شروع می‌کنیم.

- **درخواست API**: شما باید یک درخواست به API مدل هوش مصنوعی مولد با متن ورودی ارسال کنید. این کار با استفاده از تابع `fetch` در جاوا اسکریپت (Node.js) انجام می‌شود. کلید API شما نیز باید در این درخواست گنجانده شود. توصیه می‌شود با توجه به امنیت، کلید API را در برنامه خود کدگذاری سخت نکنید، بلکه از متغیرهای محیطی استفاده کنید. علاوه بر این، اگر از ارائه‌دهنده‌ای مانند Azure استفاده می‌کنید، به بررسی هویت مدیریت شده (managed identity) فکر کنید زیرا روش امن‌تری برای دسترسی به منابع در نظر گرفته می‌شود. با هویت مدیریت شده می‌توانید مجوزهای دقیق‌تری به برنامه خود اختصاص دهید. بهترین بخش این است که ارائه‌دهنده ابر احراز هویت را برای شما انجام می‌دهد.

- **پاسخ**: API پاسخی با متن تولید شده برمی‌گرداند. شما باید این متن را از پاسخ استخراج کرده و به کاربر نمایش دهید.

**شما:** به نظر ساده می‌آید، می‌توانی مرا در سناریویی راهنمایی کنی که با توجه به وضعیتی که در آن هستیم منطقی باشد؟

**سوسک زمان:** حتما، بیایید ببینیم چگونه می‌توانیم یک برنامه ساده بسازیم که متن ایتالیایی را بر اساس ورودی انگلیسی تولید کند.

## اولین برنامه شما - به من ایتالیایی یاد بده

**سوسک زمان:** مدل‌های هوش مصنوعی مولد می‌توانند برای کارهای زیادی استفاده شوند، به عنوان مثال، ترجمه زبان. در واقع، ورودی را به یک زبان می‌پذیرد و می‌تواند متن را به زبان دیگری تولید کند. بیایید با یک برنامه ساده شروع کنیم که ورودی انگلیسی می‌گیرد و متن ایتالیایی تولید می‌کند.
 را بچرخانند تا پیچ را به اندازه‌ای سریع بچرخانند که به بلند شدن دست یابند.اگرچه لئوناردو هرگز نسخه کاملی از پیچ هوایی را نساخت، طرح‌ها و یادداشت‌های او بینش‌های دقیقی در مورد نحوه تصور او از کارکرد آن ارائه می‌دهند. او معتقد بود که اگر پیچ به اندازه کافی سریع چرخانده شود، به هوا فشار می‌آورد و کل سازه را از زمین بلند می‌کند.
